# Island.io AI コンサルタント チャットボット 使用マニュアル

**対象者：** 開発経験のないコンサルタント、営業職、経営層  
**更新日：** 2026 年 1 月 10 日  
**バージョン：** 2.0（埋め込みベース検索対応）

---

## 📋 目次

1. [概要](#概要)
2. [初回セットアップ（5 分）](#初回セットアップ)
3. [日常的な使用方法](#日常的な使用方法)
4. [ドキュメント追加方法](#ドキュメント追加方法)
5. [検索方式の選択](#検索方式の選択)
6. [よくある質問](#よくある質問)
7. [トラブルシューティング](#トラブルシューティング)

---

## 概要

このツールは **Island.io に関する質問に、自動的にワークスペース内のドキュメントを参照して回答する AI チャットボット** です。

### 🎯 できること

- ✅ Island.io の ROI（投資対効果）について数字で回答
- ✅ セキュリティ課題の解決策を提案
- ✅ 商談資料として 6 つのスライドを表示
- ✅ チャット機能でリアルタイムに専門家意見を獲得
- ✅ Markdown/PDF/HTML/TXT ドキュメント自動インデックス化
- ✅ **意味的関連性に基づく検索（埋め込みベース）** ← v2.0 新機能

### 📦 含まれるもの

| ファイル                           | 説明                                         |
| ---------------------------------- | -------------------------------------------- |
| `island.io_japan_chatbot_rag.html` | メイン HTML ファイル（このファイルを開く）   |
| `rag_index.json`                   | ドキュメント検索用インデックス（自動更新）   |
| `scripts/build_rag_index.py`       | インデックス生成スクリプト                   |
| `requirements.txt`                 | 必要なライブラリリスト（PDF + 埋め込み対応） |

---

## 初回セットアップ

### Step 1: Gemini API キーを取得（無料）

1. **Google AI Studio へアクセス**

   - ブラウザで https://aistudio.google.com にアクセス
   - Google アカウントでログイン

2. **API キーを生成**

   - 左メニューから「API キー」をクリック
   - 「新しい API キーを作成」ボタンを押す
   - コピーアイコンをクリックしてキーをコピー
   - **このキーは誰にも教えないでください**

3. **キーを保管**
   - メモ帳に一時保存（後ほど使用）

### Step 2: 依存ライブラリをインストール（初回のみ）

PowerShell を開いて以下を実行：

```powershell
cd d:\island
pip install -r requirements.txt
```

**インストール内容：**

- `pdfplumber` — PDF テキスト抽出
- `google-generativeai` — Gemini API（回答生成 + 埋め込み）
- `numpy` — 数値計算（オプション）

### Step 3: HTML ファイルを開く

**Windows 11 の場合：**

1. エクスプローラーで `d:\island` フォルダを開く
2. `island.io_japan_chatbot_rag.html` をダブルクリック
3. ブラウザが自動的に起動

### Step 4: AI コンサルタント機能を有効化

1. **右下の 💬 ボタンをクリック**
2. **Gemini API キーを入力** → 「Start Consultation」をクリック
   - ⚠️ **初回のみ必要**（以降はブラウザに記憶）
3. **「こんにちは。サイバーセキュリティ専任コンサルタントです...」と表示されれば成功**

---

## 日常的な使用方法

### 📱 チャットボットで質問する

1. **チャットウィンドウを開く**

   - 右下の 💬 ボタンをクリック

2. **質問を入力**

   - 例：
     - 「VDI 比でコスト削減効果はどのくらい？」
     - 「セキュアブラウザのセキュリティ機能は？」
     - 「Field CTO の役割は？」

3. **送信**

   - テキストボックスに入力後、送信ボタン（紙飛行機アイコン）をクリック
   - または `Enter` キーを押す

4. **回答を待機**
   - 点（●●●）が表示される間は処理中
   - 回答が表示されたら読取可能

### 🎁 参照ドキュメント情報

回答の直前に以下のように表示されます：

```
参照ドキュメントを3件利用しました: seraphic/Enterprise-Browser-Security.pdf,
seraphic/Seraphic-01-General-Overview.pdf, 商談サイクル短縮.md
```

→ AI が実際に参照したドキュメントが表示されるため、信頼性が高い

### 📊 スライドプレゼンテーション

| スライド | タイトル                               |
| -------- | -------------------------------------- |
| 1/6      | タイトル：Island.io 経営層向けプレゼン |
| 2/6      | 課題：穴の空いたバケツ                 |
| 3/6      | 解決策：制御レイヤー                   |
| 4/6      | 効果：VDI 比 80%削減＆ROI 344%         |
| 5/6      | 生成 AI 時代の安全運用                 |
| 6/6      | 結論：構造改革の提案                   |

**操作方法：**

- 左下の矢印ボタン（← →）でスライド移動
- キーボードの左右矢印キーでも可

---

## ドキュメント追加方法

### 🔄 新しいドキュメント（.md / .pdf など）を検索対象に追加

#### 対応ファイル形式

- ✅ `.md` / `.markdown` （Markdown ファイル）
- ✅ `.pdf` （PDF ファイル — テキスト抽出可能な場合）
- ✅ `.txt` （テキストファイル）
- ✅ `.html` / `.htm` （HTML ファイル）

#### 追加手順

**1. ドキュメントを配置**

```
d:\island\  ← このフォルダにファイルをコピー
  ├ island.io_japan_chatbot_rag.html
  ├ 新しい資料.md
  ├ 提案資料.pdf
  └ ...
```

**2. インデックスを再生成**

PowerShell で実行：

```powershell
cd d:\island
python scripts/build_rag_index.py --root . --out rag_index.json
```

**出力例（クリーン）：**

```
Scanning: D:\island
PDF support: enabled (pdfplumber installed)
Embedding support: enabled (google-generativeai installed)

  ✓ 商談サイクル短縮.md (2850 chars)
  ✓ 提案資料.pdf (3000 chars)
  ✓ seraphic/Enterprise-Browser-Security.pdf (3000 chars)
  ✗ 破損.pdf (empty or failed to extract)
  ...

✓ Found 21 documents, writing rag_index.json
```

**3. ブラウザを再読込**

`Ctrl+F5` または `Cmd+Shift+R` でキャッシュクリア後に再読込

**4. チャットで新ドキュメントを検索**

新しく追加したファイルが検索対象になります

---

## 検索方式の選択

### 🔍 2 つの検索方式

| 方式                   | 方法                                                                                  | メリット             | デメリット                   |
| ---------------------- | ------------------------------------------------------------------------------------- | -------------------- | ---------------------------- |
| **キーワード検索**     | `python scripts/build_rag_index.py --root . --out rag_index.json`                     | 追加コストなし、高速 | キーワード一致に依存         |
| **埋め込みベース検索** | `python scripts/build_rag_index.py --root . --out rag_index.json --api-key "AIza..."` | 意味的関連性で検索   | 初回ビルド時に数十円のコスト |

### 推奨設定

**初回（セットアップ時）:**

```powershell
# キーワード検索でスタート（無料）
python scripts/build_rag_index.py --root . --out rag_index.json
```

**検索精度を高めたい場合：**

```powershell
# Gemini API キーで埋め込み化（初回のみ数十円）
python scripts/build_rag_index.py --root . --out rag_index.json --api-key "AIza..."
```

### ファイル仕様

| 項目                     | 制限値         |
| ------------------------ | -------------- |
| ファイルあたりの文字数   | **10000 文字** |
| チャット回答時の参照文書 | **上位 3 件**  |
| 各文書の参照長           | **1000 文字**  |
| ファイル数               | **制限なし**   |
| PDF ページ数             | **制限なし**   |

---

## よくある質問

### Q1: 「API キーはどのくらい安全ですか？」

**A:**

- ブラウザの **ローカルストレージに一時保存** されます
- **この HTML ファイルのみで使用** され、他サイトに送信されません
- 心配な場合は、ブラウザを閉じるたびにキーをクリアしてください

### Q2: 「埋め込みベース検索のコストは？」

**A:**

- **初回ビルド時：** 21 ドキュメント × 約 0.1 ～ 0.2 円 = 約 3 ～ 4 円（初回のみ）
- **チャット時：** ビルド時に埋め込みを保存済みなので、チャット時は追加コストなし
- キーワード検索なら完全無料

### Q3: 「オフラインで使用できますか？」

**A:**

- ❌ **AI 回答には Gemini API が必要** なため、インターネット接続が必須
- スライド表示とドキュメント検索インデックスはオフラインで動作

### Q4: 「複数の PC で同じファイルを使えますか？」

**A:**

- ✅ **可能** — HTML ファイルをコピーして別 PC で開く
- 各 PC で独立して API キーを入力

### Q5: 「回答がおかしい場合は？」

**A:**

- 同じ質問を言い換えて試してみてください
- 「VDI コスト削減」 → 「VDI 維持コストの削減効果」
- ドキュメントが参照されていない場合、`rag_index.json` を再生成

### Q6: 「ドキュメント追加後、検索されません」

**A:**

- `python scripts/build_rag_index.py --root . --out rag_index.json` を実行
- ブラウザキャッシュをクリア（`Ctrl+Shift+Delete`）して再読込

### Q7: 「キーワード検索と埋め込みベース検索はどう違う？」

**A:**

| 項目       | キーワード検索           | 埋め込みベース検索           |
| ---------- | ------------------------ | ---------------------------- |
| **仕組み** | 単語の出現回数でカウント | 意味的な関連性でスコアリング |
| **精度**   | キーワード一致に依存     | 同義表現も捕捉               |
| **速度**   | 高速                     | ほぼ同速                     |
| **コスト** | 無料                     | 初回数十円                   |

---

## トラブルシューティング

### 🔴 問題: 「HTML を開いてもページが真っ白」

**原因：** ブラウザが React/Tailwind CSS を読み込めていない

**解決策：**

1. ブラウザを再起動
2. `Ctrl+Shift+Delete` でキャッシュ削除
3. HTML ファイルを再度ダブルクリック
4. それでもダメな場合、別ブラウザ（Chrome/Edge）で試す

### 🔴 問題: 「チャット送信後、"エラーが発生しました"と表示される」

**原因：** API キーが無効、または API 接続エラー

**解決策：**

1. API キーを再確認（https://aistudio.google.com で新規生成）
2. チャットウィンドウを閉じて、💬 ボタンから再度開く
3. インターネット接続を確認

### 🔴 問題: 「ドキュメント追加後、'Found 0 documents' と表示される」

**原因：** ファイルが読み込まれていない、または Python/pdfplumber が未インストール

**解決策：**

```powershell
# 1. フォルダを確認
cd d:\island
dir  # 追加ファイルが見える？

# 2. 依存ライブラリをインストール
pip install -r requirements.txt

# 3. スクリプト再実行
python scripts/build_rag_index.py --root . --out rag_index.json
```

### 🔴 問題: 「スクリプト実行時に 'Python not found' と表示される」

**原因：** Python がインストールされていない、またはパスが設定されていない

**解決策：**

1. https://python.org から Python 3.10+ をダウンロード
2. インストール時に **「Add Python to PATH」にチェック**
3. PowerShell を再起動して実行

### 🔴 問題: 「PDF が読み込まれない」

**原因：** PDF がスキャン画像ベース（テキスト層なし）、または暗号化されている

**確認方法：**

1. PDF をテキストエディタで開く
2. テキスト選択・コピーが可能か確認
3. 不可能な場合は OCR 処理が必要

---

## 📞 サポート情報

### 不具合報告時に確認する情報

```
1. ブラウザ名とバージョン（F12で確認可能）
2. エラーメッセージ全文
3. 実行したコマンド
4. rag_index.json のファイルサイズ（MB）
5. Python バージョン（python --version）
```

### 推奨環境

| 項目           | 仕様                               |
| -------------- | ---------------------------------- |
| OS             | Windows 10/11, macOS, Linux        |
| ブラウザ       | Chrome 90+, Edge 90+, Safari 14+   |
| Python         | 3.8 以上（ドキュメント追加時のみ） |
| インターネット | 必須（Gemini API 用）              |

---

## 🎓 ファイル構成の理解

```
d:\island\
│
├─ island.io_japan_chatbot_rag.html    ← このファイルを開く
├─ rag_index.json                      ← AI 検索用インデックス（自動更新）
├─ requirements.txt                    ← 必要ライブラリリスト
│
├─ scripts/
│  └─ build_rag_index.py              ← インデックス生成スクリプト
│
├─ README_MANUAL.md                    ← このマニュアル
│
├─ 資料群/
│  ├─ 商談サイクル短縮.md
│  ├─ island競合比較_20250921.md
│  ├─ 提案資料.pdf
│  └─ ...
```

---

## 🔄 AI が検索する流れ

```
あなたの質問
    ↓
キーワード抽出 または 埋め込み化
    ↓
rag_index.json でドキュメントをスコアリング
    ↓
上位3件の抜粋（各1000文字）を取得
    ↓
Gemini API に送信（システム指示 + ドキュメント + 質問）
    ↓
AI 回答生成・表示
```

---

## ✅ チェックリスト（初回セットアップ確認）

- [ ] Gemini API キーを取得した
- [ ] `pip install -r requirements.txt` でライブラリをインストール
- [ ] HTML ファイルをブラウザで開いた
- [ ] スライド表示が正常に見える
- [ ] チャットボタン（💬）が右下に表示される
- [ ] API キーを入力してチャット初期化した
- [ ] 簡単な質問（例：「VDI とは？」）で回答が返ってきた
- [ ] 参照ドキュメント名が表示される
- [ ] `python scripts/build_rag_index.py` でインデックス生成できる

**すべてチェック完了 → セットアップ完了 🎉**

---

**Last Updated:** 2026 年 1 月 10 日  
**バージョン：** 2.0（埋め込みベース検索対応）
